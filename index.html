<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Manufacturing SPC Monitoring System v2.2</title>
Â  Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
Â  Â  <style>
Â  Â  Â  Â  * {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
Â  Â  Â  Â  Â  Â  background: #f5f5f5;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  max-width: 1400px;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  header {
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .version {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 20px;
Â  Â  Â  Â  Â  Â  right: 20px;
Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.2);
Â  Â  Â  Â  Â  Â  padding: 5px 12px;
Â  Â  Â  Â  Â  Â  border-radius: 15px;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  h1 {
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  nav {
Â  Â  Â  Â  Â  Â  background: white;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  button {
Â  Â  Â  Â  Â  Â  background: #667eea;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  padding: 10px 20px;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  transition: all 0.3s;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  button:hover {
Â  Â  Â  Â  Â  Â  background: #5568d3;
Â  Â  Â  Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  button.active {
Â  Â  Â  Â  Â  Â  background: #764ba2;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  button:disabled {
Â  Â  Â  Â  Â  Â  background: #ccc;
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  Â  Â  transform: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .view {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  background: white;
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .view.active {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .view-header {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .refresh-btn {
Â  Â  Â  Â  Â  Â  background: #4CAF50;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .refresh-btn:hover {
Â  Â  Â  Â  Â  Â  background: #45a049;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .sync-status {
Â  Â  Â  Â  Â  Â  padding: 10px 15px;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .sync-status.syncing {
Â  Â  Â  Â  Â  Â  background: #fff3cd;
Â  Â  Â  Â  Â  Â  color: #856404;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .sync-status.success {
Â  Â  Â  Â  Â  Â  background: #d4edda;
Â  Â  Â  Â  Â  Â  color: #155724;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .sync-status.error {
Â  Â  Â  Â  Â  Â  background: #f8d7da;
Â  Â  Â  Â  Â  Â  color: #721c24;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .inspector-section {
Â  Â  Â  Â  Â  Â  background: #f0f4ff;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  margin-bottom: 25px;
Â  Â  Â  Â  Â  Â  border: 2px solid #667eea;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .form-group {
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  label {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  margin-bottom: 5px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  color: #555;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  input, select, textarea {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border: 2px solid #e0e0e0;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  transition: border 0.3s;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  input:focus, select:focus, textarea:focus {
Â  Â  Â  Â  Â  Â  outline: none;
Â  Â  Â  Â  Â  Â  border-color: #667eea;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  input:disabled, select:disabled, textarea:disabled {
Â  Â  Â  Â  Â  Â  background: #f5f5f5;
Â  Â  Â  Â  Â  Â  color: #999;
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  textarea {
Â  Â  Â  Â  Â  Â  resize: vertical;
Â  Â  Â  Â  Â  Â  min-height: 80px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .measurement-fields {
Â  Â  Â  Â  Â  Â  background: #f9f9f9;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .measurement-group {
Â  Â  Â  Â  Â  Â  background: white;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  Â  Â  border: 2px solid #e0e0e0;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .measurement-group.disabled {
Â  Â  Â  Â  Â  Â  opacity: 0.6;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .measurement-header {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  Â  Â  padding-bottom: 10px;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #e0e0e0;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .measurement-header input[type="checkbox"] {
Â  Â  Â  Â  Â  Â  width: auto;
Â  Â  Â  Â  Â  Â  margin-right: 10px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transform: scale(1.3);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .measurement-header label {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  font-size: 16px;
Â  Â  Â  Â  Â  Â  color: #667eea;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .vibration-axes {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
Â  Â  Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .axis-group {
Â  Â  Â  Â  Â  Â  border: 1px solid #e0e0e0;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  background: #fafafa;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .axis-header {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .axis-header input[type="checkbox"] {
Â  Â  Â  Â  Â  Â  width: auto;
Â  Â  Â  Â  Â  Â  margin-right: 8px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .axis-header label {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  color: #666;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .sound-checkboxes {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .sound-checkbox {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  padding: 8px;
Â  Â  Â  Â  Â  Â  background: #fafafa;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  border: 1px solid #e0e0e0;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .sound-checkbox input[type="checkbox"] {
Â  Â  Â  Â  Â  Â  width: auto;
Â  Â  Â  Â  Â  Â  margin-right: 8px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .sound-checkbox label {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  font-weight: normal;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .sound-checkbox input:disabled + label {
Â  Â  Â  Â  Â  Â  color: #999;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .alert {
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .alert-success {
Â  Â  Â  Â  Â  Â  background: #d4edda;
Â  Â  Â  Â  Â  Â  color: #155724;
Â  Â  Â  Â  Â  Â  border: 1px solid #c3e6cb;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .alert-warning {
Â  Â  Â  Â  Â  Â  background: #fff3cd;
Â  Â  Â  Â  Â  Â  color: #856404;
Â  Â  Â  Â  Â  Â  border: 1px solid #ffeaa7;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .alert-danger {
Â  Â  Â  Â  Â  Â  background: #f8d7da;
Â  Â  Â  Â  Â  Â  color: #721c24;
Â  Â  Â  Â  Â  Â  border: 1px solid #f5c6cb;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .button-group {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  gap: 10px;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .btn-secondary {
Â  Â  Â  Â  Â  Â  background: #6c757d;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .btn-secondary:hover {
Â  Â  Â  Â  Â  Â  background: #5a6268;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .filters {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
Â  Â  Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  Â  Â  margin-bottom: 30px;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  background: #f9f9f9;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .chart-container {
Â  Â  Â  Â  Â  Â  margin-bottom: 40px;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  background: white;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .chart-header {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  Â  Â  padding-bottom: 10px;
Â  Â  Â  Â  Â  Â  border-bottom: 2px solid #e0e0e0;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .chart-title {
Â  Â  Â  Â  Â  Â  font-size: 18px;
Â  Â  Â  Â  Â  Â  font-weight: 700;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .fault-badge {
Â  Â  Â  Â  Â  Â  background: #f44336;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  padding: 5px 10px;
Â  Â  Â  Â  Â  Â  border-radius: 20px;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  table {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  border-collapse: collapse;
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  th, td {
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #e0e0e0;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  th {
Â  Â  Â  Â  Â  Â  background: #667eea;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  tr:hover {
Â  Â  Â  Â  Â  Â  background: #f5f5f5;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .btn-small {
Â  Â  Â  Â  Â  Â  padding: 5px 10px;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  Â  Â  margin-right: 5px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .btn-danger {
Â  Â  Â  Â  Â  Â  background: #f44336;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .btn-danger:hover {
Â  Â  Â  Â  Â  Â  background: #d32f2f;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .modal {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  background: rgba(0,0,0,0.5);
Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .modal.active {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .modal-content {
Â  Â  Â  Â  Â  Â  background: white;
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  max-width: 600px;
Â  Â  Â  Â  Â  Â  width: 90%;
Â  Â  Â  Â  Â  Â  max-height: 90vh;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .modal-header {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  Â  Â  padding-bottom: 10px;
Â  Â  Â  Â  Â  Â  border-bottom: 2px solid #e0e0e0;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .close-modal {
Â  Â  Â  Â  Â  Â  font-size: 24px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  color: #999;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .close-modal:hover {
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .info-row {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  padding: 10px 0;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #f0f0f0;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .info-label {
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  color: #666;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .info-value {
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  canvas {
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .na-badge {
Â  Â  Â  Â  Â  Â  background: #e0e0e0;
Â  Â  Â  Â  Â  Â  color: #666;
Â  Â  Â  Â  Â  Â  padding: 2px 8px;
Â  Â  Â  Â  Â  Â  border-radius: 3px;
Â  Â  Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="container">
Â  Â  Â  Â  <header>
Â  Â  Â  Â  Â  Â  <div class="version">v2.2</div>
Â  Â  Â  Â  Â  Â  <h1>Manufacturing SPC Monitoring System</h1>
Â  Â  Â  Â  Â  Â  <p>Statistical Process Control & Equipment Monitoring</p>
Â  Â  Â  Â  </header>
Â  Â  Â  Â  
Â  Â  Â  Â  <nav>
Â  Â  Â  Â  Â  Â  <button onclick="showView('entry')" class="active" id="btn-entry">Inspection</button>
Â  Â  Â  Â  Â  Â  <button onclick="showView('charts')" id="btn-charts">Control Charts</button>
Â  Â  Â  Â  Â  Â  <button onclick="showView('log')" id="btn-log">Data Log</button>
Â  Â  Â  Â  </nav>
Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div id="entry-view" class="view active">
Â  Â  Â  Â  Â  Â  <h2>New Inspection Entry</h2>
Â  Â  Â  Â  Â  Â  <div id="sync-status"></div>
Â  Â  Â  Â  Â  Â  <div id="entry-alert"></div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <form id="inspection-form">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="inspector-section">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>Inspector Information</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Inspector Name *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="inspector-name" required placeholder="Enter your name">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Line *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="line" required onchange="updateDownlineOptions()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Select Line</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="RX500">RX500</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="RX300">RX300</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="JBFlex">JBFlex</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="L80">L80</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="HH">HH</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group" id="downline-group" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Downline *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="downline" onchange="updateMachineOptions()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Select Downline</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Machine *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="machine" required onchange="updateInspectionPoints()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Select Machine</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Inspection Point *</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input list="inspection-points-list" id="inspection-point" required placeholder="Select or type a new inspection point">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <datalist id="inspection-points-list"></datalist>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="measurement-fields" id="measurement-fields">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>Select Measurements to Record</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="measurement-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="measurement-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="enable-temperature" onchange="toggleMeasurement('temperature')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="enable-temperature">Temperature</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Temperature (Â°F)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.1" id="temperature" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="measurement-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="measurement-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="enable-vibration" onchange="toggleMeasurement('vibration')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="enable-vibration">Vibration</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="vibration-axes">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="axis-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="axis-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="enable-vibration-x" disabled onchange="toggleAxis('x')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="enable-vibration-x">X-Axis</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.01" id="vibration-x" placeholder="mm/s" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="axis-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="axis-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="enable-vibration-y" disabled onchange="toggleAxis('y')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="enable-vibration-y">Y-Axis</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.01" id="vibration-y" placeholder="mm/s" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="axis-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="axis-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="enable-vibration-z" disabled onchange="toggleAxis('z')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="enable-vibration-z">Z-Axis</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="0.01" id="vibration-z" placeholder="mm/s" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="measurement-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="measurement-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="enable-auditory" onchange="toggleMeasurement('auditory')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="enable-auditory">Auditory (Sound)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sound-checkboxes">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sound-checkbox">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="sound-grinding" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="sound-grinding">Grinding</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sound-checkbox">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="sound-scratching" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="sound-scratching">Scratching</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sound-checkbox">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="sound-squealing" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="sound-squealing">Squealing</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sound-checkbox">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="sound-clicking" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="sound-clicking">Clicking</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sound-checkbox">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="sound-rattling" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="sound-rattling">Rattling</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="sound-checkbox">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="sound-humming" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="sound-humming">Abnormal Humming</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="measurement-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="measurement-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="enable-tack-rpm" onchange="toggleMeasurement('tack-rpm')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="enable-tack-rpm">Tack RPM</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Tack RPM</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" step="1" id="tack-rpm" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Notes</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="notes" placeholder="Enter any observations or notes..."></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div class="button-group">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit">Submit Inspection</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="btn-secondary" onclick="submitAndContinue()">Submit & Add Another Inspection</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" class="btn-secondary" onclick="newMachine()">New Machine</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div id="charts-view" class="view">
Â  Â  Â  Â  Â  Â  <div class="view-header">
Â  Â  Â  Â  Â  Â  Â  Â  <h2>Control Charts</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="refresh-btn" onclick="refreshData()">ğŸ”„ Refresh Data</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="charts-sync-status"></div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div class="filters">
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Filter by Line</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="filter-line" onchange="renderCharts()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">All Lines</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Filter by Downline</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="filter-downline" onchange="renderCharts()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">All Downlines</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Filter by Machine</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="filter-machine" onchange="renderCharts()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">All Machines</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label>Filter by Inspection Point</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="filter-point" onchange="renderCharts()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">All Points</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div id="charts-container"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  <div id="log-view" class="view">
Â  Â  Â  Â  Â  Â  <div class="view-header">
Â  Â  Â  Â  Â  Â  Â  Â  <h2>Inspection Data Log</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="refresh-btn" onclick="refreshData()">ğŸ”„ Refresh Data</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="log-sync-status"></div>
Â  Â  Â  Â  Â  Â  <div id="log-container"></div>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  
Â  Â  Â  Â  <div id="point-modal" class="modal">
Â  Â  Â  Â  <div class="modal-content">
Â  Â  Â  Â  Â  Â  <div class="modal-header">
Â  Â  Â  Â  Â  Â  Â  Â  <h3>Inspection Details</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="close-modal" onclick="closeModal()">&times;</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div id="modal-body"></div>
Â  Â  Â  Â  Â  Â  <div class="form-group" style="margin-top: 20px;">
Â  Â  Â  Â  Â  Â  Â  Â  <label>Add Additional Notes</label>
Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="additional-notes"></textarea>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <button onclick="saveAdditionalNotes()">Save Notes</button>
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  
Â  Â  <script>
Â  Â  Â  Â  // Configuration - PASTE YOUR GOOGLE APPS SCRIPT URL HERE
Â  Â  Â  Â  const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzkmTzohbjm7jRmWmgeU4Zrzp373qBJovncVA1jrK2K5glnVANUX4R6tUwl2vJSvijBVA/exec';
Â  Â  Â  Â  
Â  Â  Â  Â  // Data structure
Â  Â  Â  Â  let inspections = [];
Â  Â  Â  Â  let currentPointId = null;
Â  Â  Â  Â  
Â  Â  Â  Â  // Line/Downline/Machine/Point configuration
Â  Â  Â  Â  const lineConfig = {
Â  Â  Â  Â  Â  Â  'RX500': {
Â  Â  Â  Â  Â  Â  Â  Â  downlines: ['Clipper', '501', '502', '503', '504', '505'],
Â  Â  Â  Â  Â  Â  Â  Â  machines: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Clipper': ['Diverter', 'Blending Skid', 'Saw House', 'Splicing', 'Wetting system', 'Forming table'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '501': ['Ilapak', 'Case Erector', 'Palletizer'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '502': ['Ilapak', 'Case Erector', 'Palletizer'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '503': ['Ilapak', 'Case Erector', 'Palletizer'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '504': ['Ilapak', 'Case Erector', 'Palletizer'],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '505': ['Ilapak', 'Case Erector', 'Palletizer'],
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  'RX300': { downlines: [], machines: {} },
Â  Â  Â  Â  Â  Â  'JBFlex': { downlines: [], machines: {} },
Â  Â  Â  Â  Â  Â  'L80': { downlines: [], machines: {} },
Â  Â  Â  Â  Â  Â  'HH': { downlines: [], machines: {} }
Â  Â  Â  Â  };
Â  Â  Â  Â  
Â  Â  Â  Â  let inspectionPoints = {
Â  Â  Â  Â  Â  Â  'default': ['Inspection Point 1']
Â  Â  Â  Â  };
Â  Â  Â  Â  
Â  Â  Â  Â  // Update downline options based on line selection
Â  Â  Â  Â  function updateDownlineOptions() {
Â  Â  Â  Â  Â  Â  const line = document.getElementById('line').value;
Â  Â  Â  Â  Â  Â  const downlineGroup = document.getElementById('downline-group');
Â  Â  Â  Â  Â  Â  const downlineSelect = document.getElementById('downline');
Â  Â  Â  Â  Â  Â  const machineSelect = document.getElementById('machine');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (line && lineConfig[line].downlines.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  downlineGroup.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  downlineSelect.required = true;
Â  Â  Â  Â  Â  Â  Â  Â  downlineSelect.innerHTML = '<option value="">Select Downline</option>' +
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lineConfig[line].downlines.map(d => `<option value="${d}">${d}</option>`).join('');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  downlineGroup.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  downlineSelect.required = false;
Â  Â  Â  Â  Â  Â  Â  Â  downlineSelect.value = '';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  machineSelect.innerHTML = '<option value="">Select Machine</option>';
Â  Â  Â  Â  Â  Â  updateInspectionPoints();
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Update machine options based on downline selection
Â  Â  Â  Â  function updateMachineOptions() {
Â  Â  Â  Â  Â  Â  const line = document.getElementById('line').value;
Â  Â  Â  Â  Â  Â  const downline = document.getElementById('downline').value;
Â  Â  Â  Â  Â  Â  const machineSelect = document.getElementById('machine');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (line && downline && lineConfig[line].machines[downline]) {
Â  Â  Â  Â  Â  Â  Â  Â  const machines = lineConfig[line].machines[downline];
Â  Â  Â  Â  Â  Â  Â  Â  machineSelect.innerHTML = '<option value="">Select Machine</option>' +
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  machines.map(m => `<option value="${m}">${m}</option>`).join('');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  machineSelect.innerHTML = '<option value="">Select Machine</option>';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  updateInspectionPoints();
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Update inspection points based on selections
Â  Â  Â  Â  function updateInspectionPoints() {
Â  Â  Â  Â  Â  Â  const line = document.getElementById('line').value;
Â  Â  Â  Â  Â  Â  const downline = document.getElementById('downline').value;
Â  Â  Â  Â  Â  Â  const machine = document.getElementById('machine').value;
Â  Â  Â  Â  Â  Â  const datalist = document.getElementById('inspection-points-list');
Â  Â  Â  Â  Â  Â  const pointInput = document.getElementById('inspection-point');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const key = `${line}-${downline || 'no-downline'}-${machine}`;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Load points from local storage for this key, or use default
Â  Â  Â  Â  Â  Â  const points = inspectionPoints[key] || inspectionPoints.default;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  datalist.innerHTML = points.map(p => `<option value="${p}">`).join('');
Â  Â  Â  Â  Â  Â  pointInput.value = '';
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Sync to Google Drive using hidden iframe (bypasses CORS)
Â  Â  Â  Â  function syncToCloud(payload) {
Â  Â  Â  Â  Â  Â  return new Promise((resolve) => {
Â  Â  Â  Â  Â  Â  Â  Â  showSyncStatus('syncing', 'Syncing to cloud...');
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let iframe = document.getElementById('sync-iframe');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!iframe) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  iframe = document.createElement('iframe');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  iframe.id = 'sync-iframe';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  iframe.name = 'sync-iframe';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  iframe.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(iframe);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let form = document.getElementById('sync-form');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (form) form.remove();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  form = document.createElement('form');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  form.id = 'sync-form';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  form.method = 'POST';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  form.action = GOOGLE_SCRIPT_URL;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  form.target = 'sync-iframe';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  form.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dataInput = document.createElement('input');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dataInput.type = 'hidden';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dataInput.name = 'data';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dataInput.value = JSON.stringify(payload);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  form.appendChild(dataInput);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(form);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Submit the form
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  form.submit();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Show success after a short delay (can't read response due to CORS)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showSyncStatus('success', 'âœ“ Synced to cloud successfully');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Synced payload:', payload);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => showSyncStatus('', ''), 3000);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve(true);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }, 1000);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('Sync error:', error);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showSyncStatus('error', 'âœ— Cloud sync failed - data saved locally');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => showSyncStatus('', ''), 5000);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  resolve(false);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Refresh data from cloud
Â  Â  Â  Â  async function refreshData() {
Â  Â  Â  Â  Â  Â  const currentView = document.querySelector('.view.active').id;
Â  Â  Â  Â  Â  Â  const statusDiv = currentView === 'charts-view' ? 'charts-sync-status' : 'log-sync-status';
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  showSyncStatus('syncing', 'Refreshing from cloud...', statusDiv);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(GOOGLE_SCRIPT_URL);
Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  if (data.success && data.inspections) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inspections = data.inspections;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  saveData(); // Update local storage too
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (currentView === 'charts-view') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  populateFilters();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderCharts();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (currentView === 'log-view') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderLog();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showSyncStatus('success', 'âœ“ Data refreshed successfully', statusDiv);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error('Invalid response from server');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error('Refresh error:', error);
Â  Â  Â  Â  Â  Â  Â  Â  showSyncStatus('error', 'âœ— Failed to refresh from cloud', statusDiv);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  setTimeout(() => showSyncStatus('', '', statusDiv), 3000);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  function showSyncStatus(type, message, divId = 'sync-status') {
Â  Â  Â  Â  Â  Â  const statusDiv = document.getElementById(divId);
Â  Â  Â  Â  Â  Â  if (!message) {
Â  Â  Â  Â  Â  Â  Â  Â  statusDiv.innerHTML = '';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  statusDiv.innerHTML = `<div class="sync-status ${type}">${message}</div>`;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Load data from localStorage
Â  Â  Â  Â  function loadData() {
Â  Â  Â  Â  Â  Â  const storedInspections = localStorage.getItem('spcInspections');
Â  Â  Â  Â  Â  Â  if (storedInspections) {
Â  Â  Â  Â  Â  Â  Â  Â  inspections = JSON.parse(storedInspections);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const storedPoints = localStorage.getItem('spcInspectionPoints');
Â  Â  Â  Â  Â  Â  if (storedPoints) {
Â  Â  Â  Â  Â  Â  Â  Â  inspectionPoints = JSON.parse(storedPoints);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Save data to localStorage
Â  Â  Â  Â  function saveData() {
Â  Â  Â  Â  Â  Â  localStorage.setItem('spcInspections', JSON.stringify(inspections));
Â  Â  Â  Â  Â  Â  localStorage.setItem('spcInspectionPoints', JSON.stringify(inspectionPoints));
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Initialize
Â  Â  Â  Â  loadData();
Â  Â  Â  Â  
Â  Â  Â  Â  // Toggle measurement enable/disable
Â  Â  Â  Â  function toggleMeasurement(type) {
Â  Â  Â  Â  Â  Â  const checkbox = document.getElementById(`enable-${type}`);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (type === 'vibration') {
Â  Â  Â  Â  Â  Â  Â  Â  const xCheck = document.getElementById('enable-vibration-x');
Â  Â  Â  Â  Â  Â  Â  Â  const yCheck = document.getElementById('enable-vibration-y');
Â  Â  Â  Â  Â  Â  Â  Â  const zCheck = document.getElementById('enable-vibration-z');
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  xCheck.disabled = !checkbox.checked;
Â  Â  Â  Â  Â  Â  Â  Â  yCheck.disabled = !checkbox.checked;
Â  Â  Â  Â  Â  Â  Â  Â  zCheck.disabled = !checkbox.checked;
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  if (!checkbox.checked) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  xCheck.checked = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  yCheck.checked = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  zCheck.checked = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('vibration-x').disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('vibration-y').disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('vibration-z').disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else if (type === 'auditory') {
Â  Â  Â  Â  Â  Â  Â  Â  const sounds = ['grinding', 'scratching', 'squealing', 'clicking', 'rattling', 'humming'];
Â  Â  Â  Â  Â  Â  Â  Â  sounds.forEach(sound => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const soundCheck = document.getElementById(`sound-${sound}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  soundCheck.disabled = !checkbox.checked;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!checkbox.checked) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  soundCheck.checked = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  const input = document.getElementById(type);
Â  Â  Â  Â  Â  Â  Â  Â  input.disabled = !checkbox.checked;
Â  Â  Â  Â  Â  Â  Â  Â  if (!checkbox.checked) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  input.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  function toggleAxis(axis) {
Â  Â  Â  Â  Â  Â  const checkbox = document.getElementById(`enable-vibration-${axis}`);
Â  Â  Â  Â  Â  Â  const input = document.getElementById(`vibration-${axis}`);
Â  Â  Â  Â  Â  Â  input.disabled = !checkbox.checked;
Â  Â  Â  Â  Â  Â  if (!checkbox.checked) {
Â  Â  Â  Â  Â  Â  Â  Â  input.value = '';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // View management
Â  Â  Â  Â  function showView(viewName) {
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
Â  Â  Â  Â  Â  Â  document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  document.getElementById(`${viewName}-view`).classList.add('active');
Â  Â  Â  Â  Â  Â  document.getElementById(`btn-${viewName}`).classList.add('active');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (viewName === 'charts') {
Â  Â  Â  Â  Â  Â  Â  Â  populateFilters();
Â  Â  Â  Â  Â  Â  Â  Â  renderCharts();
Â  Â  Â  Â  Â  Â  } else if (viewName === 'log') {
Â  Â  Â  Â  Â  Â  Â  Â  renderLog();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Form submission
Â  Â  Â  Â  async function submitInspection(keepContext = false) {
Â  Â  Â  Â  Â  Â  const form = document.getElementById('inspection-form');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (!form.checkValidity()) {
Â  Â  Â  Â  Â  Â  Â  Â  form.reportValidity();
Â  Â  Â  Â  Â  Â  Â  Â  return false;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const downlineValue = document.getElementById('downline-group').style.display === 'none' 
Â  Â  Â  Â  Â  Â  Â  Â  ? null 
Â  Â  Â  Â  Â  Â  Â  Â  : document.getElementById('downline').value;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const inspection = {
Â  Â  Â  Â  Â  Â  Â  Â  id: Date.now().toString(),
Â  Â  Â  Â  Â  Â  Â  Â  inspector: document.getElementById('inspector-name').value,
Â  Â  Â  Â  Â  Â  Â  Â  line: document.getElementById('line').value,
Â  Â  Â  Â  Â  Â  Â  Â  downline: downlineValue,
Â  Â  Â  Â  Â  Â  Â  Â  machine: document.getElementById('machine').value,
Â  Â  Â  Â  Â  Â  Â  Â  inspectionPoint: document.getElementById('inspection-point').value,
Â  Â  Â  Â  Â  Â  Â  Â  measurements: {},
Â  Â  Â  Â  Â  Â  Â  Â  notes: document.getElementById('notes').value,
Â  Â  Â  Â  Â  Â  Â  Â  timestamp: new Date().toISOString(),
Â  Â  Â  Â  Â  Â  Â  Â  history: [{
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  action: 'created',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  timestamp: new Date().toISOString()
Â  Â  Â  Â  Â  Â  Â  Â  }]
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Check which measurements were taken
Â  Â  Â  Â  Â  Â  if (document.getElementById('enable-temperature').checked) {
Â  Â  Â  Â  Â  Â  Â  Â  inspection.measurements.temperature = parseFloat(document.getElementById('temperature').value);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (document.getElementById('enable-vibration').checked) {
Â  Â  Â  Â  Â  Â  Â  Â  inspection.measurements.vibration = {};
Â  Â  Â  Â  Â  Â  Â  Â  if (document.getElementById('enable-vibration-x').checked) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inspection.measurements.vibration.x = parseFloat(document.getElementById('vibration-x').value);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  if (document.getElementById('enable-vibration-y').checked) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inspection.measurements.vibration.y = parseFloat(document.getElementById('vibration-y').value);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  if (document.getElementById('enable-vibration-z').checked) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inspection.measurements.vibration.z = parseFloat(document.getElementById('vibration-z').value);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (document.getElementById('enable-auditory').checked) {
Â  Â  Â  Â  Â  Â  Â  Â  inspection.measurements.auditory = [];
Â  Â  Â  Â  Â  Â  Â  Â  const sounds = ['grinding', 'scratching', 'squealing', 'clicking', 'rattling', 'humming'];
Â  Â  Â  Â  Â  Â  Â  Â  sounds.forEach(sound => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (document.getElementById(`sound-${sound}`).checked) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inspection.measurements.auditory.push(sound);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (document.getElementById('enable-tack-rpm').checked) {
Â  Â  Â  Â  Â  Â  Â  Â  inspection.measurements.tackRPM = parseFloat(document.getElementById('tack-rpm').value);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Validate at least one measurement
Â  Â  Â  Â  Â  Â  if (Object.keys(inspection.measurements).length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Please select and enter at least one measurement type.');
Â  Â  Â  Â  Â  Â  Â  Â  return false;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  inspections.push(inspection);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Update and save inspection points
Â  Â  Â  Â  Â  Â  const key = `${inspection.line}-${inspection.downline || 'no-downline'}-${inspection.machine}`;
Â  Â  Â  Â  Â  Â  if (!inspectionPoints[key]) {
Â  Â  Â  Â  Â  Â  Â  Â  inspectionPoints[key] = [];
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  if (!inspectionPoints[key].includes(inspection.inspectionPoint)) {
Â  Â  Â  Â  Â  Â  Â  Â  inspectionPoints[key].push(inspection.inspectionPoint);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  saveData();
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Sync to cloud
Â  Â  Â  Â  Â  Â  await syncToCloud({
Â  Â  Â  Â  Â  Â  Â  Â  action: 'save',
Â  Â  Â  Â  Â  Â  Â  Â  inspection: inspection
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Check for faults
Â  Â  Â  Â  Â  Â  const faults = checkForFaults(inspection);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  let alertHtml = '<div class="alert alert-success">Inspection submitted successfully!</div>';
Â  Â  Â  Â  Â  Â  if (faults.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  alertHtml += '<div class="alert alert-danger"><strong>âš ï¸ Control Chart Faults Detected!</strong><br>' +
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  faults.map(f => `${f.type}: ${f.description}`).join('<br>') +
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  '<br><br><strong>Action Required: Create work order</strong></div>';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  document.getElementById('entry-alert').innerHTML = alertHtml;
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('entry-alert').innerHTML = '';
Â  Â  Â  Â  Â  Â  }, 5000);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (keepContext) {
Â  Â  Â  Â  Â  Â  Â  Â  // Keep inspector, line, downline, and machine; clear everything else
Â  Â  Â  Â  Â  Â  Â  Â  const inspectorName = document.getElementById('inspector-name').value;
Â  Â  Â  Â  Â  Â  Â  Â  const line = document.getElementById('line').value;
Â  Â  Â  Â  Â  Â  Â  Â  const downline = document.getElementById('downline').value;
Â  Â  Â  Â  Â  Â  Â  Â  const machine = document.getElementById('machine').value;
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  form.reset();
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('inspector-name').value = inspectorName;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('line').value = line;
Â  Â  Â  Â  Â  Â  Â  Â  updateDownlineOptions();
Â  Â  Â  Â  Â  Â  Â  Â  if (downline) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('downline').value = downline;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateMachineOptions();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('machine').value = machine;
Â  Â  Â  Â  Â  Â  Â  Â  updateInspectionPoints();
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // Reset checkboxes and disable fields
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('#measurement-fields input[type="number"]').forEach(inp => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inp.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inp.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('.sound-checkbox input').forEach(inp => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inp.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inp.checked = false;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  form.reset();
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('downline-group').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  // Reset checkboxes and disable fields
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('input[type="number"], input[type="text"]').forEach(inp => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (inp.id !== 'inspector-name') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inp.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inp.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('.sound-checkbox input').forEach(inp => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inp.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inp.checked = false;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  updateInspectionPoints();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  return true;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  document.getElementById('inspection-form').addEventListener('submit', function(e) {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  submitInspection(false);
Â  Â  Â  Â  });
Â  Â  Â  Â  
Â  Â  Â  Â  function submitAndContinue() {
Â  Â  Â  Â  Â  Â  submitInspection(true);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  function newMachine() {
Â  Â  Â  Â  Â  Â  const form = document.getElementById('inspection-form');
Â  Â  Â  Â  Â  Â  const inspectorName = document.getElementById('inspector-name').value;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  form.reset();
Â  Â  Â  Â  Â  Â  document.getElementById('inspector-name').value = inspectorName;
Â  Â  Â  Â  Â  Â  document.getElementById('downline-group').style.display = 'none';
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Reset checkboxes and disable fields
Â  Â  Â  Â  Â  Â  document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
Â  Â  Â  Â  Â  Â  document.querySelectorAll('#measurement-fields input[type="number"]').forEach(inp => {
Â  Â  Â  Â  Â  Â  Â  Â  inp.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  inp.value = '';
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.sound-checkbox input').forEach(inp => {
Â  Â  Â  Â  Â  Â  Â  Â  inp.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  inp.checked = false;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  updateInspectionPoints();
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Western Electric Rules (7 faults)
Â  Â  Â  Â  function checkForFaults(newInspection) {
Â  Â  Â  Â  Â  Â  const faults = [];
Â  Â  Â  Â  Â  Â  const key = `${newInspection.line}-${newInspection.downline || ''}-${newInspection.machine}-${newInspection.inspectionPoint}`;
Â  Â  Â  Â  Â  Â  const history = inspections.filter(i => 
Â  Â  Â  Â  Â  Â  Â  Â  i.line === newInspection.line &&
Â  Â  Â  Â  Â  Â  Â  Â  (i.downline || '') === (newInspection.downline || '') &&
Â  Â  Â  Â  Â  Â  Â  Â  i.machine === newInspection.machine &&
Â  Â  Â  Â  Â  Â  Â  Â  i.inspectionPoint === newInspection.inspectionPoint
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (history.length < 3) return faults;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Check temperature
Â  Â  Â  Â  Â  Â  if (newInspection.measurements.temperature !== undefined) {
Â  Â  Â  Â  Â  Â  Â  Â  checkMeasurementFaults('Temperature', 'temperature', history, newInspection, faults);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Check vibration axes
Â  Â  Â  Â  Â  Â  if (newInspection.measurements.vibration) {
Â  Â  Â  Â  Â  Â  Â  Â  ['x', 'y', 'z'].forEach(axis => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (newInspection.measurements.vibration[axis] !== undefined) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  checkMeasurementFaults(`Vibration ${axis.toUpperCase()}`, `vibration.${axis}`, history, newInspection, faults);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Check tack RPM
Â  Â  Â  Â  Â  Â  if (newInspection.measurements.tackRPM !== undefined) {
Â  Â  Â  Â  Â  Â  Â  Â  checkMeasurementFaults('Tack RPM', 'tackRPM', history, newInspection, faults);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  return faults;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  function checkMeasurementFaults(label, path, history, newInspection, faults) {
Â  Â  Â  Â  Â  Â  const getValue = (obj, path) => {
Â  Â  Â  Â  Â  Â  Â  Â  return path.split('.').reduce((o, p) => o?.[p], obj.measurements);
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const values = history
Â  Â  Â  Â  Â  Â  Â  Â  .map(i => getValue(i, path))
Â  Â  Â  Â  Â  Â  Â  Â  .filter(v => v !== undefined);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (values.length < 3) return;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const mean = values.reduce((a, b) => a + b) / values.length;
Â  Â  Â  Â  Â  Â  const stdDev = Math.sqrt(values.reduce((sq, n) => sq + Math.pow(n - mean, 2), 0) / values.length);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const latest = getValue(newInspection, path);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Rule 1: One point beyond 3Ïƒ
Â  Â  Â  Â  Â  Â  if (Math.abs(latest - mean) > 3 * stdDev) {
Â  Â  Â  Â  Â  Â  Â  Â  faults.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: 'Rule 1',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  description: `${label}: Point beyond 3 sigma (${latest.toFixed(2)})`
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Rule 2: 9 points in a row on same side of center
Â  Â  Â  Â  Â  Â  if (values.length >= 9) {
Â  Â  Â  Â  Â  Â  Â  Â  const last9 = values.slice(-9);
Â  Â  Â  Â  Â  Â  Â  Â  const allAbove = last9.every(v => v > mean);
Â  Â  Â  Â  Â  Â  Â  Â  const allBelow = last9.every(v => v < mean);
Â  Â  Â  Â  Â  Â  Â  Â  if (allAbove || allBelow) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  faults.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: 'Rule 2',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  description: `${label}: 9 points in a row on same side of mean`
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Rule 3: 6 points steadily increasing or decreasing
Â  Â  Â  Â  Â  Â  if (values.length >= 6) {
Â  Â  Â  Â  Â  Â  Â  Â  const last6 = values.slice(-6);
Â  Â  Â  Â  Â  Â  Â  Â  let increasing = true, decreasing = true;
Â  Â  Â  Â  Â  Â  Â  Â  for (let i = 1; i < last6.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (last6[i] <= last6[i-1]) increasing = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (last6[i] >= last6[i-1]) decreasing = false;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  if (increasing || decreasing) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  faults.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: 'Rule 3',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  description: `${label}: 6 points steadily ${increasing ? 'increasing' : 'decreasing'}`
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Rule 5: 2 out of 3 points beyond 2Ïƒ
Â  Â  Â  Â  Â  Â  if (values.length >= 3) {
Â  Â  Â  Â  Â  Â  Â  Â  const last3 = values.slice(-3);
Â  Â  Â  Â  Â  Â  Â  Â  const beyond2Sigma = last3.filter(v => Math.abs(v - mean) > 2 * stdDev).length;
Â  Â  Â  Â  Â  Â  Â  Â  if (beyond2Sigma >= 2) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  faults.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: 'Rule 5',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  description: `${label}: 2 out of 3 points beyond 2 sigma`
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Rule 6: 4 out of 5 points beyond 1Ïƒ
Â  Â  Â  Â  Â  Â  if (values.length >= 5) {
Â  Â  Â  Â  Â  Â  Â  Â  const last5 = values.slice(-5);
Â  Â  Â  Â  Â  Â  Â  Â  const beyond1Sigma = last5.filter(v => Math.abs(v - mean) > stdDev).length;
Â  Â  Â  Â  Â  Â  Â  Â  if (beyond1Sigma >= 4) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  faults.push({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: 'Rule 6',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  description: `${label}: 4 out of 5 points beyond 1 sigma`
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Populate filters
Â  Â  Â  Â  function populateFilters() {
Â  Â  Â  Â  Â  Â  const lines = [...new Set(inspections.map(i => i.line))];
Â  Â  Â  Â  Â  Â  const downlines = [...new Set(inspections.map(i => i.downline).filter(d => d))];
Â  Â  Â  Â  Â  Â  const machines = [...new Set(inspections.map(i => i.machine))];
Â  Â  Â  Â  Â  Â  const points = [...new Set(inspections.map(i => i.inspectionPoint))];
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const lineFilter = document.getElementById('filter-line');
Â  Â  Â  Â  Â  Â  const downlineFilter = document.getElementById('filter-downline');
Â  Â  Â  Â  Â  Â  const machineFilter = document.getElementById('filter-machine');
Â  Â  Â  Â  Â  Â  const pointFilter = document.getElementById('filter-point');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  lineFilter.innerHTML = '<option value="">All Lines</option>' + 
Â  Â  Â  Â  Â  Â  Â  Â  lines.map(l => `<option value="${l}">${l}</option>`).join('');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  downlineFilter.innerHTML = '<option value="">All Downlines</option>' + 
Â  Â  Â  Â  Â  Â  Â  Â  downlines.map(d => `<option value="${d}">${d}</option>`).join('');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  machineFilter.innerHTML = '<option value="">All Machines</option>' + 
Â  Â  Â  Â  Â  Â  Â  Â  machines.map(m => `<option value="${m}">${m}</option>`).join('');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  pointFilter.innerHTML = '<option value="">All Points</option>' + 
Â  Â  Â  Â  Â  Â  Â  Â  points.map(p => `<option value="${p}">${p}</option>`).join('');
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Render control charts
Â  Â  Â  Â  function renderCharts() {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('charts-container');
Â  Â  Â  Â  Â  Â  container.innerHTML = '';
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const filterLine = document.getElementById('filter-line').value;
Â  Â  Â  Â  Â  Â  const filterDownline = document.getElementById('filter-downline').value;
Â  Â  Â  Â  Â  Â  const filterMachine = document.getElementById('filter-machine').value;
Â  Â  Â  Â  Â  Â  const filterPoint = document.getElementById('filter-point').value;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  let filtered = inspections.filter(i => {
Â  Â  Â  Â  Â  Â  Â  Â  return (!filterLine || i.line === filterLine) &&
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (!filterDownline || i.downline === filterDownline) &&
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (!filterMachine || i.machine === filterMachine) &&
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (!filterPoint || i.inspectionPoint === filterPoint);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (filtered.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = '<p>No data available for the selected filters.</p>';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Group by line-downline-machine-point
Â  Â  Â  Â  Â  Â  const groups = {};
Â  Â  Â  Â  Â  Â  filtered.forEach(i => {
Â  Â  Â  Â  Â  Â  Â  Â  const key = `${i.line}${i.downline ? ' - ' + i.downline : ''} - ${i.machine} - ${i.inspectionPoint}`;
Â  Â  Â  Â  Â  Â  Â  Â  if (!groups[key]) groups[key] = [];
Â  Â  Â  Â  Â  Â  Â  Â  groups[key].push(i);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Create charts for each group
Â  Â  Â  Â  Â  Â  Object.keys(groups).forEach(key => {
Â  Â  Â  Â  Â  Â  Â  Â  const data = groups[key].sort((a, b) => 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  new Date(a.timestamp) - new Date(b.timestamp)
Â  Â  Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // Temperature chart
Â  Â  Â  Â  Â  Â  Â  Â  if (data.some(d => d.measurements.temperature !== undefined)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createControlChart(key, 'temperature', 'Temperature (Â°F)', data, container);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // Vibration charts
Â  Â  Â  Â  Â  Â  Â  Â  ['x', 'y', 'z'].forEach(axis => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (data.some(d => d.measurements.vibration?.[axis] !== undefined)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createControlChart(key, `vibration.${axis}`, `Vibration ${axis.toUpperCase()} (mm/s)`, data, container);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // Tack RPM chart
Â  Â  Â  Â  Â  Â  Â  Â  if (data.some(d => d.measurements.tackRPM !== undefined)) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createControlChart(key, 'tackRPM', 'Tack RPM', data, container);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Create individual control chart
Â  Â  Â  Â  function createControlChart(title, measurePath, measureLabel, data, container) {
Â  Â  Â  Â  Â  Â  const getValue = (obj) => {
Â  Â  Â  Â  Â  Â  Â  Â  return measurePath.split('.').reduce((o, p) => o?.[p], obj.measurements);
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const allData = data.map((d, i) => ({
Â  Â  Â  Â  Â  Â  Â  Â  value: getValue(d),
Â  Â  Â  Â  Â  Â  Â  Â  timestamp: new Date(d.timestamp).toLocaleString(),
Â  Â  Â  Â  Â  Â  Â  Â  index: i,
Â  Â  Â  Â  Â  Â  Â  Â  inspection: d
Â  Â  Â  Â  Â  Â  })).filter(d => d.value !== undefined);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (allData.length === 0) return;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const values = allData.map(d => d.value);
Â  Â  Â  Â  Â  Â  const timestamps = allData.map(d => d.timestamp);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const mean = values.reduce((a, b) => a + b) / values.length;
Â  Â  Â  Â  Â  Â  const stdDev = Math.sqrt(values.reduce((sq, n) => sq + Math.pow(n - mean, 2), 0) / values.length);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const ucl = mean + 3 * stdDev;
Â  Â  Â  Â  Â  Â  const lcl = mean - 3 * stdDev;
Â  Â  Â  Â  Â  Â  const uwl = mean + 2 * stdDev;
Â  Â  Â  Â  Â  Â  const lwl = mean - 2 * stdDev;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const chartDiv = document.createElement('div');
Â  Â  Â  Â  Â  Â  chartDiv.className = 'chart-container';
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const hasFaults = values.some(v => Math.abs(v - mean) > 3 * stdDev);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const chartId = `chart-${measurePath.replace(/\./g, '-')}-${title.replace(/\s/g, '-')}`;
Â  Â  Â  Â  Â  Â  chartDiv.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="chart-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="chart-title">${title} - ${measureLabel}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${hasFaults ? '<div class="fault-badge">âš ï¸ Fault Detected</div>' : ''}
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <canvas id="${chartId}"></canvas>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  container.appendChild(chartDiv);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const ctx = chartDiv.querySelector('canvas').getContext('2d');
Â  Â  Â  Â  Â  Â  const chart = new Chart(ctx, {
Â  Â  Â  Â  Â  Â  Â  Â  type: 'line',
Â  Â  Â  Â  Â  Â  Â  Â  data: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  labels: timestamps,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  datasets: [
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label: measureLabel,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data: values,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderColor: '#667eea',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  backgroundColor: 'rgba(102, 126, 234, 0.1)',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tension: 0.1,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pointRadius: 5,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pointHoverRadius: 7
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label: 'Mean',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data: Array(values.length).fill(mean),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderColor: '#4CAF50',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderDash: [5, 5],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pointRadius: 0
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label: 'UCL (3Ïƒ)',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data: Array(values.length).fill(ucl),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderColor: '#f44336',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderDash: [10, 5],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pointRadius: 0
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label: 'LCL (3Ïƒ)',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data: Array(values.length).fill(lcl),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderColor: '#f44336',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderDash: [10, 5],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pointRadius: 0
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label: 'UWL (2Ïƒ)',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data: Array(values.length).fill(uwl),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderColor: '#ff9800',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderDash: [5, 5],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pointRadius: 0
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label: 'LWL (2Ïƒ)',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data: Array(values.length).fill(lwl),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderColor: '#ff9800',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  borderDash: [5, 5],
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pointRadius: 0
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  options: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  responsive: true,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  maintainAspectRatio: true,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  onClick: (event, elements) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (elements.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const index = elements[0].index;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showPointDetails(allData[index].inspection);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  plugins: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  legend: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  display: true
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tooltip: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mode: 'index',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  intersect: false
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scales: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  y: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  beginAtZero: false
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Show point details modal
Â  Â  Â  Â  function showPointDetails(point) {
Â  Â  Â  Â  Â  Â  currentPointId = point.id;
Â  Â  Â  Â  Â  Â  const modal = document.getElementById('point-modal');
Â  Â  Â  Â  Â  Â  const body = document.getElementById('modal-body');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  let html = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-label">Inspector:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-value">${point.inspector}</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-label">Line:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-value">${point.line}</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (point.downline) {
Â  Â  Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-label">Downline:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-value">${point.downline}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-label">Machine:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-value">${point.machine}</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-label">Inspection Point:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-value">${point.inspectionPoint}</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-label">Timestamp:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-value">${new Date(point.timestamp).toLocaleString()}</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Add measurements
Â  Â  Â  Â  Â  Â  if (point.measurements.temperature !== undefined) {
Â  Â  Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-label">Temperature:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-value">${point.measurements.temperature} Â°F</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (point.measurements.vibration) {
Â  Â  Â  Â  Â  Â  Â  Â  ['x', 'y', 'z'].forEach(axis => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (point.measurements.vibration[axis] !== undefined) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-label">Vibration ${axis.toUpperCase()}:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-value">${point.measurements.vibration[axis]} mm/s</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (point.measurements.auditory && point.measurements.auditory.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-label">Auditory (Sounds):</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-value">${point.measurements.auditory.map(s => s.charAt(0).toUpperCase() + s.slice(1)).join(', ')}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (point.measurements.tackRPM !== undefined) {
Â  Â  Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-label">Tack RPM:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-value">${point.measurements.tackRPM}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="info-row">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-label">Notes:</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="info-value">${point.notes || 'None'}</span>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (point.additionalNotes) {
Â  Â  Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div style="margin-top: 15px; padding: 10px; background: #f9f9f9; border-radius: 5px;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>Additional Notes History:</strong><br>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${point.additionalNotes.map(n => 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `<div style="margin-top: 5px; padding: 5px; border-left: 3px solid #667eea;">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${n.note}<br>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <small style="color: #999;">${new Date(n.timestamp).toLocaleString()}</small>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>`
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ).join('')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  body.innerHTML = html;
Â  Â  Â  Â  Â  Â  document.getElementById('additional-notes').value = '';
Â  Â  Â  Â  Â  Â  modal.classList.add('active');
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  function closeModal() {
Â  Â  Â  Â  Â  Â  document.getElementById('point-modal').classList.remove('active');
Â  Â  Â  Â  Â  Â  currentPointId = null;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  function saveAdditionalNotes() {
Â  Â  Â  Â  Â  Â  const notes = document.getElementById('additional-notes').value.trim();
Â  Â  Â  Â  Â  Â  if (!notes || !currentPointId) return;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const inspection = inspections.find(i => i.id === currentPointId);
Â  Â  Â  Â  Â  Â  if (!inspection) return;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (!inspection.additionalNotes) {
Â  Â  Â  Â  Â  Â  Â  Â  inspection.additionalNotes = [];
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  inspection.additionalNotes.push({
Â  Â  Â  Â  Â  Â  Â  Â  note: notes,
Â  Â  Â  Â  Â  Â  Â  Â  timestamp: new Date().toISOString()
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  inspection.history.push({
Â  Â  Â  Â  Â  Â  Â  Â  action: 'notes_added',
Â  Â  Â  Â  Â  Â  Â  Â  timestamp: new Date().toISOString()
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  saveData();
Â  Â  Â  Â  Â  Â  syncToCloud({
Â  Â  Â  Â  Â  Â  Â  Â  action: 'update',
Â  Â  Â  Â  Â  Â  Â  Â  id: currentPointId,
Â  Â  Â  Â  Â  Â  Â  Â  inspection: inspection
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  closeModal();
Â  Â  Â  Â  Â  Â  alert('Additional notes saved successfully!');
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Render log view
Â  Â  Â  Â  function renderLog() {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('log-container');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (inspections.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  container.innerHTML = '<p>No inspection data available.</p>';
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const sorted = [...inspections].sort((a, b) => 
Â  Â  Â  Â  Â  Â  Â  Â  new Date(b.timestamp) - new Date(a.timestamp)
Â  Â  Â  Â  Â  Â  );
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  let html = `
Â  Â  Â  Â  Â  Â  Â  Â  <table>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Timestamp</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Inspector</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Line</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Downline</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Machine</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Point</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Temp</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Vib X/Y/Z</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Sounds</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>RPM</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Actions</th>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </thead>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  sorted.forEach(i => {
Â  Â  Â  Â  Â  Â  Â  Â  const temp = i.measurements.temperature !== undefined ? i.measurements.temperature : '<span class="na-badge">N/A</span>';
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  let vib = '';
Â  Â  Â  Â  Â  Â  Â  Â  if (i.measurements.vibration) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const vx = i.measurements.vibration.x !== undefined ? i.measurements.vibration.x.toFixed(2) : '-';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const vy = i.measurements.vibration.y !== undefined ? i.measurements.vibration.y.toFixed(2) : '-';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const vz = i.measurements.vibration.z !== undefined ? i.measurements.vibration.z.toFixed(2) : '-';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  vib = `${vx}/${vy}/${vz}`;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  vib = '<span class="na-badge">N/A</span>';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  const sounds = i.measurements.auditory && i.measurements.auditory.length > 0 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ? i.measurements.auditory.length + ' detected' 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  : '<span class="na-badge">N/A</span>';
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  const rpm = i.measurements.tackRPM !== undefined ? i.measurements.tackRPM : '<span class="na-badge">N/A</span>';
Â  Â  Â  Â  Â  Â  Â  Â  const downline = i.downline || '<span class="na-badge">N/A</span>';
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${new Date(i.timestamp).toLocaleString()}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${i.inspector}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${i.line}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${downline}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${i.machine}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${i.inspectionPoint}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${temp}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${vib}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${sounds}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${rpm}</td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-small btn-secondary" onclick="viewInspection('${i.id}')">View</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-small btn-danger" onclick="deleteInspection('${i.id}')">Delete</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  html += '</tbody></table>';
Â  Â  Â  Â  Â  Â  container.innerHTML = html;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  function viewInspection(id) {
Â  Â  Â  Â  Â  Â  const inspection = inspections.find(i => i.id === id);
Â  Â  Â  Â  Â  Â  if (inspection) {
Â  Â  Â  Â  Â  Â  Â  Â  showPointDetails(inspection);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  async function deleteInspection(id) {
Â  Â  Â  Â  Â  Â  if (confirm('Are you sure you want to delete this inspection? This will also attempt to delete it from the cloud.')) {
Â  Â  Â  Â  Â  Â  Â  Â  const success = await syncToCloud({
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  action: 'delete',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  id: id
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  if (success) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inspections = inspections.filter(i => i.id !== id);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  saveData();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderLog();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert('Inspection deleted successfully!');
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert('Failed to delete inspection from cloud. Please try again or manually remove the data.');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.querySelector(`button[onclick="deleteInspection('${id}')"]`).disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </script>
</body>
</html>